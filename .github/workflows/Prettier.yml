name: Prettier
on:
  workflow_call:
    inputs:
      subrepo:
        required: true
        type: string
jobs:
  prettier:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
        with:
          fetch-depth: 0

      - name: prettier
        uses: EPMatt/reviewdog-action-prettier@f691104cbeb4b0299df971275444c64be93c03ae # v1.3.0
        with:
          fail_level: any
          filter_mode: nofilter
          # TODO: All the reporters are broken, including this one, because they do not properly fail on errors.
          # This one prints the errors in the CI logs and fails when prettier detects errors, so its good enough for now.
          reporter: github-pr-review
          workdir: ${{ inputs.subrepo }}
